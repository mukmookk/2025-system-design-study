# **3.3 비잔틴 장군 문제 (Byzantine Generals Problem)**

비잔틴 장군 문제는 **분산 시스템에서 노드가 악의적이거나 임의로 잘못된 행동을 할 때,  
어떻게 동일한 결정을 내릴 수 있는가?** 라는 문제를 다루는 개념이다.

기존의 Paxos, Raft는 “비잔틴 장애”를 가정하지 않고 설계되었기 때문에  
잘못된 메시지를 악의적으로 보내는 노드가 존재해도 시스템이 망가지지 않도록 하는  
**더 강력한 합의 알고리즘**이 필요하다.

---

# **1. 비잔틴 장군 문제란 무엇인가?**

고대 장군들이 서로 다른 성을 공격하기 위해 합의해야 한다고 생각해보자:

- 각 장군은 메신저를 통해 “공격/후퇴” 메시지를 교환한다.  
- 그러나 일부 장군 또는 메신저가 **배신하거나**,  
- 메시지를 **임의로 조작**, **거짓말**, **전달 지연**, **다르게 전달**할 수 있다.

이 상황에서 필요한 목표는 단 두 가지이다.

1) 모두가 **같은 결정을** 내려야 한다(Agreement)  
2) 그 결정은 **정상적인 장군들이 제안한 값**이어야 한다(Validity)

하지만 장군 일부가 배신자일 경우 → 정상 장군만 가지고는  
누가 배신자인지 명확하게 판단하기 어렵다.

이 문제가 바로 **비잔틴 장군 문제(Byzantine Generals Problem)** 이다.

---

# **2. 비잔틴 장애 (Byzantine Fault)**

비잔틴 장애는 노드가 **임의의 잘못된 행동**을 하는 것을 의미한다.

예시:

- 메시지를 거짓으로 보낸다  
- 일부 노드에게는 “A”, 일부에게는 “B”라고 서로 다른 값 전달  
- 요청을 무시하거나 무작위 응답  
- 악의적인 공격, 해킹, 조작  
- 하드웨어 오류로 인해 잘못된 연산 결과 발생  

즉, 단순한 “죽음(Crash Fault)”보다 훨씬 복잡하고 위험한 장애이다.

### 비교

| 장애 유형 | 행동 | 예시 | 해결 알고리즘 |
|----------|------|------|----------------|
| **Crash Fault** | 그냥 꺼짐 | 서버 다운 | Paxos, Raft |
| **Byzantine Fault** | 거짓말·조작·불규칙 | 해킹, 잘못된 계산 | PBFT, HotStuff, Tendermint |

Raft/Paxos는 비잔틴 장애를 가정하지 않아 “악의적인 노드”에는 취약하다.

---

---

# **3. 사례 **

실제 시스템에서는 순수한 이론적 BFT보다는  
“최적화된 Practical BFT(PBFT)” 계열 알고리즘이 사용된다.

대표 사례는 다음과 같다.

---

## **1) PBFT (Practical Byzantine Fault Tolerance)**

MIT에서 제안한 알고리즘.  
3f+1 노드에서 f개의 비잔틴 장애를 견딜 수 있다.

특징:

- 고성능 구현 가능  
- 로컬 네트워크 환경에서 높은 처리량  
- 블록체인 이전에는 금융 시스템 등에서 연구·사용됨

단점:

- 노드가 많아질수록 메시지 복잡도가 **O(n²)**로 증가  
- 대규모 분산 네트워크에 적용이 어려움

---

## **2) Bitcoin (PoW)**

(생략 ...)

---

## **3) 비잔틴 장애가 실제로 발생하는 예시**

- 악성 노드(해커 침투)  
- 데이터 조작을 시도하는 내부 공격자  
- 잘못된 연산을 수행하는 GPU/ASIC 노드  
- 메시지 변조  
- 의도된 중복 서명(Double-signing)  
- 서로 다른 노드에게 상반된 정보 전달 (“Equivocation attack”)