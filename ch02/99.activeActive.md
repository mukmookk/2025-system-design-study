# Active-Passive vs Active-Active 복제 구조

분산 시스템에서 높은 가용성을 달성하기 위해 가장 많이 사용하는 구조가  
**Active-Passive**와 **Active-Active** 복제 방식이다.  
두 방식은 장애 시 대응 속도, 복잡성, 일관성 전략에서 크게 다르다.

---

## 1. Active-Passive (액티브-패시브)

### 개념
- **하나의 노드만 실제 요청을 처리(Active)**
- **나머지 노드들은 대기(Passive)**
- Active 노드가 장애 발생 시, Passive 노드가 Active로 승격(Failover)

### 특징
- 복제 방식은 보통 **Sync/Async 모두 가능**
- Passive 노드는 클라이언트 요청을 직접 처리하지 않음
- 장애 전환(Failover)이 완전히 자동 혹은 반자동으로 이루어짐

### 장점
- 구조가 단순해 운영이 쉽다  
- 데이터 일관성 관리가 편함 → **CP 성향**  
- 장애 전환 시 비교적 예측 가능

### 단점
- Failover 동안 짧은 중단이 발생할 수 있음  
- 쓰기 처리량은 Active 노드 성능에 종속  
- Passive 노드는 리소스를 사용하지만 요청 처리를 안 함 → 비효율

### 실무 예시
- MySQL Master-Slave  
- Redis Sentinel  
- HDFS NameNode (HA 방식)  
- ZooKeeper / Etcd (리더-팔로워 구조)

---

## 2. Active-Active (액티브-액티브)

### 개념
- **여러 노드가 동시에 요청을 처리**
- 모든 노드가 Active 상태
- 트래픽을 균등하게 분산하여 처리량·가용성 향상

### 특징
- 데이터 복제는 대부분 **Eventually Consistent(최종 일관성)**  
- 글로벌 분산 환경에서 선호됨  
- Conflict Resolution(충돌 해결) 메커니즘 필요

### 장점
- 높은 가용성 → 특정 노드 장애 시 전체 서비스 영향 없음  
- 성능·확장성 높음 (노드 수만큼 병렬 처리량 증가)  
- 리전별 트래픽 분산 가능 → 글로벌 서비스에 필수

### 단점
- 데이터 충돌 가능  
  (예: 같은 데이터에 다른 노드에서 동시에 쓰기)  
- Conflict 해결 전략 필요 (LWW, CRDT, Vector Clock 등)  
- 시스템 복잡도 증가 → 운영 난이도 상승  
- 강한 일관성이 어렵고 대부분 **AP 성향**

### 실무 예시
- DynamoDB  
- Cassandra  
- Redis Cluster (Multi-Master)  
- 일부 Kafka multi-leader 구조 (MM2 등)

---

## Active-Passive vs Active-Active 비교

| 항목 | Active-Passive | Active-Active |
|------|----------------|----------------|
| 요청 처리 | 하나의 노드가 처리 | 여러 노드가 동시에 처리 |
| 장애 시 | Failover 필요 | 자동 우회, 즉시 대응 |
| 일관성 모델 | 강한 일관성 선호 | 최종 일관성 기반 |
| 확장성 | 낮음 | 매우 높음 |
| 충돌 가능성 | 없음 | 존재(충돌 해결 필요) |
| 복잡성 | 낮음 | 높음 |
| CAP 성향 | CP 성향 | AP 성향 |
