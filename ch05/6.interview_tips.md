# 목차

- [5.6 시스템 설계 인터뷰: 키-값 저장소 접근 전략](#56-시스템-설계-인터뷰-키-값-저장소-접근-전략)
- [5.6.1 문제를 명확히 정의할 것](#56-1-문제를-명확히-정의할-것)
- [5.6.2 확장성과 성능에 중점을 둘 것](#56-2-확장성과-성능에-중점을-둘-것)
- [5.6.3 레플리카와 일관성](#56-3-레플리카와-일관성)
- [5.6.4 장애를 전제로 설계할 것](#56-4-장애를-전제로-설계할-것)
- [5.6.5 시스템의 발전 가능성](#56-5-시스템의-발전-가능성)

# 5.6 시스템 설계 인터뷰: 키-값 저장소 접근 전략

시스템 설계 인터뷰에서 키-값 저장소는  
확장성, 일관성, 장애 허용성에 대한 사고 과정을 평가하기 위한 대표적인 주제이다.

이 절에서는 키-값 저장소 설계 문제를 받았을 때  
어떤 관점으로 설명하면 좋은지 핵심 전략만 정리한다.

---

## 5.6.1 문제를 명확히 정의할 것

설계를 시작하기 전에 요구사항을 먼저 명확히 해야 한다.

- 읽기와 쓰기 비중
- 데이터 규모와 트래픽 패턴
- 지연 시간 요구 수준
- 강한 일관성이 필요한지 여부
- 캐시인지, 영구 저장소인지

인터뷰에서는 구조를 바로 제시하기보다  
문제를 어떻게 정의하는지가 더 중요하게 평가된다.

---

## 5.6.2 확장성과 성능에 중점을 둘 것

키-값 저장소는 수평 확장이 전제이다.

설명 시 다음 요소를 포함하면 충분하다.

- 해시 기반 키 분산
- 노드 추가 시 재배치 비용
- 일관된 해싱을 통한 확장성 확보
- 핫 키 발생 가능성과 분산 전략

“노드가 늘어났을 때 어떻게 확장되는가”에 대한 관점이 중요하다.

---

## 5.6.3 레플리카와 일관성

레플리카는 가용성과 장애 대응을 위한 핵심 요소이다.

설계 설명 시 다음 정도만 짚어주면 충분하다.

- 복제 개수(N)
- 읽기(R)와 쓰기(W) 방식
- R + W > N 을 통한 일관성 확보 원리

일관성 모델은 다음처럼 간단히 정리할 수 있다.

- Strong Consistency: 항상 최신 값 반환
- Eventual Consistency: 시간이 지나면 최신 값으로 수렴

Eventual Consistency 환경에서는  
동시에 발생하는 쓰기로 인해 쓰기 충돌이 발생할 수 있으며,  
이를 타임스탬프 기반 병합이나 애플리케이션 레벨에서 해결한다고 설명하면 된다.

---

## 5.6.4 장애를 전제로 설계할 것

분산 시스템에서 장애는 항상 발생할 수 있다.

설계 설명에는 다음 관점이 포함되어야 한다.

- 일시적 장애 시 가용성 유지 전략
- 영구적 장애 발생 후 데이터 복구 방식
- 노드 장애 감지 방법

Hinted Handoff, Merkle Tree, Gossip 프로토콜을  
장애 유형별 대응 예로 간단히 언급하면 충분하다.

---

## 5.6.5 시스템의 발전 가능성

설계는 현재 요구사항뿐 아니라  
미래 변화에 대응 가능해야 한다.

- 노드 수 증가에 따른 확장
- 데이터 규모 증가 시 재분산 비용
- 추가 기능(TTL, 캐시, 통계 등) 확장 가능성

“지금은 단순하지만, 커질 수 있는 구조”임을 보여주는 것이 중요하다.